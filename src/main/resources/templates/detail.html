<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="/main.css" rel="stylesheet">
  <title>Detail Page</title>
</head>
<body>
<div th:replace="~{navbar.html :: navbar}"></div>
<div class="detail">
  <img src="https://placehold.co/300">
  <div>
  <div>
    <h3 th:text="${item.getId()}">상품번호</h3>
    <h4 th:text="${item.getTitle()}">상품</h4>
    <p th:text="${item.getPrice()}">가격</p>
  </div>
  <div>
    <button th:onclick="'deleteItem(' + ${item.getId()} + ')'" style="cursor: pointer">삭제</button>
    <button th:onclick="|location.href='/edit/' + [[${item.getId()}]]|" style="cursor: pointer" type="button">수정</button>
  </div>
  </div>
</div>
<script>
  function deleteItem(id) {
    fetch(`/delete/${id}`, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => {
      if (response.ok) {
        alert("삭제 성공!");
      } else {
        alert("Failed to delete item.");
      }
      location.href = "/";
    });
  }

</script>
</body>
</html>